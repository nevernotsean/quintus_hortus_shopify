(function(){var u,e,k,t,R,N,z,Z,f,i,o,K,x,s,F,ad,h,w,j,ab,Y,p,I,D,L,d,W,A,U,ac,n,B,ag,a,X,C,M,J,v,g,V,c,E,r,Q,G,q,O,P,T,H,m,S,aa,b,af,ae,y,l=function(ah,ai){return function(){return ah.apply(ai,arguments)}};n=function(){return document.visibilityState==="visible"||(A.tests!=null)};C=(function(){var ah;ah=[];if(typeof document!=="undefined"&&document!==null){document.addEventListener("visibilitychange",function(){var ak,al,aj,ai;ai=[];for(al=0,aj=ah.length;al<aj;al++){ak=ah[al];ai.push(ak(n()))}return ai})}return function(ai){return ah.push(ai)}})();D=function(ak){var ai,aj,ah;aj={};for(ai in ak){ah=ak[ai];aj[ai]=ah}return aj};p=function(ah){var ai;ai={};return function(){var al,am,aj,an,ak;am="";for(an=0,ak=arguments.length;an<ak;an++){al=arguments[an];am+=al.toString()+","}aj=ai[am];if(!aj){ai[am]=aj=ah.apply(this,arguments)}return aj}};X=function(ah){return function(al){var ai,ak,aj;if(al instanceof Array||al instanceof NodeList||al instanceof HTMLCollection){aj=(function(){var ao,an,am;am=[];for(ak=ao=0,an=al.length;0<=an?ao<an:ao>an;ak=0<=an?++ao:--ao){ai=Array.prototype.slice.call(arguments,1);ai.splice(0,0,al[ak]);am.push(ah.apply(this,ai))}return am}).apply(this,arguments);return aj}return ah.apply(this,arguments)}};w=function(ak,al){var aj,ai,ah;ah=[];for(aj in al){ai=al[aj];ah.push(ak[aj]!=null?ak[aj]:ak[aj]=ai)}return ah};j=function(al,ak){var aj,ai,ah;if((al.style!=null)){return ab(al,ak)}else{ah=[];for(aj in ak){ai=ak[aj];ah.push(al[aj]=ai.format())}return ah}};ab=function(am,ak){var an,aj,ai,al,ah;ak=M(ak);al=[];an=B(am);for(aj in ak){ah=ak[aj];if(af.contains(aj)){al.push([aj,ah])}else{if(ah.format!=null){ah=ah.format()}if(typeof ah==="number"){ah=""+ah+(y(aj,ah))}if((am.hasAttribute!=null)&&am.hasAttribute(aj)){am.setAttribute(aj,ah)}else{if(am.style!=null){am.style[v(aj)]=ah}}if(aj in am){am[aj]=ah}}}if(al.length>0){if(an){ai=new i();ai.applyProperties(al);return am.setAttribute("transform",ai.decompose().format())}else{ah=(al.map(function(ao){return ae(ao[0],ao[1])})).join(" ");return am.style[v("transform")]=ah}}};B=function(ai){var aj,ah;if((typeof SVGElement!=="undefined"&&SVGElement!==null)&&(typeof SVGSVGElement!=="undefined"&&SVGSVGElement!==null)){return ai instanceof SVGElement&&!(ai instanceof SVGSVGElement)}else{return(aj=(ah=A.tests)!=null?typeof ah.isSVG==="function"?ah.isSVG(ai):void 0:void 0)!=null?aj:false}};c=function(ai,ah){var aj;aj=Math.pow(10,ah);return Math.round(ai*aj)/aj};o=(function(){function ah(al){var aj,ak,ai;this.obj={};for(ak=0,ai=al.length;ak<ai;ak++){aj=al[ak];this.obj[aj]=1}}ah.prototype.contains=function(ai){return this.obj[ai]===1};return ah})();b=function(ah){return ah.replace(/([A-Z])/g,function(ai){return"-"+ai.toLowerCase()})};g=new o("marginTop,marginLeft,marginBottom,marginRight,paddingTop,paddingLeft,paddingBottom,paddingRight,top,left,bottom,right,translateX,translateY,translateZ,perspectiveX,perspectiveY,perspectiveZ,width,height,maxWidth,maxHeight,minWidth,minHeight,borderRadius".split(","));W=new o("rotate,rotateX,rotateY,rotateZ,skew,skewX,skewY,skewZ".split(","));af=new o("translate,translateX,translateY,translateZ,scale,scaleX,scaleY,scaleZ,rotate,rotateX,rotateY,rotateZ,rotateC,rotateCX,rotateCY,skew,skewX,skewY,skewZ,perspective".split(","));H=new o("accent-height,ascent,azimuth,baseFrequency,baseline-shift,bias,cx,cy,d,diffuseConstant,divisor,dx,dy,elevation,filterRes,fx,fy,gradientTransform,height,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,letter-spacing,limitingConeAngle,markerHeight,markerWidth,numOctaves,order,overline-position,overline-thickness,pathLength,points,pointsAtX,pointsAtY,pointsAtZ,r,radius,rx,ry,seed,specularConstant,specularExponent,stdDeviation,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,surfaceScale,target,targetX,targetY,transform,underline-position,underline-thickness,viewBox,width,x,x1,x2,y,y1,y2,z".split(","));y=function(ai,ah){if(typeof ah!=="number"){return""}if(g.contains(ai)){return"px"}else{if(W.contains(ai)){return"deg"}}return""};ae=function(ai,ah){var aj,ak;aj=(""+ah).match(/^([0-9.-]*)([^0-9]*)$/);if(aj!=null){ah=aj[1];ak=aj[2]}else{ah=parseFloat(ah)}ah=c(parseFloat(ah),10);if((ak==null)||ak===""){ak=y(ai,ah)}return""+ai+"("+ah+ak+")"};M=function(al){var ah,ak,am,ap,ao,ai,an,aj;am={};for(ap in al){ao=al[ap];if(af.contains(ap)){ak=ap.match(/(translate|rotateC|rotate|skew|scale|perspective)(X|Y|Z|)/);if(ak&&ak[2].length>0){am[ap]=ao}else{aj=["X","Y","Z"];for(ai=0,an=aj.length;ai<an;ai++){ah=aj[ai];am[ak[1]+ah]=ao}}}else{am[ap]=ao}}return am};d=function(ai){var ah;ah=ai==="opacity"?1:0;return""+ah+(y(ai,ah))};U=function(aj,au){var at,aq,ap,an,ah,ar,al,ak,ao,ai,am;an={};at=B(aj);if(aj.style!=null){ah=window.getComputedStyle(aj,null);for(al=0,ao=au.length;al<ao;al++){aq=au[al];if(af.contains(aq)){if(an.transform==null){if(at){ap=new i((am=aj.transform.baseVal.consolidate())!=null?am.matrix:void 0)}else{ap=f.fromTransform(ah[v("transform")])}an.transform=ap.decompose()}}else{if((aj.hasAttribute!=null)&&aj.hasAttribute(aq)){ar=aj.getAttribute(aq)}else{if(aq in aj){ar=aj[aq]}else{ar=ah[aq]}}if(((ar==null)||aq==="d")&&H.contains(aq)){ar=aj.getAttribute(aq)}if(ar===""||(ar==null)){ar=d(aq)}an[aq]=L(ar)}}}else{for(ak=0,ai=au.length;ak<ai;ak++){aq=au[ak];an[aq]=L(aj[aq])}}s(aj,an);return an};s=function(ak,aj){var ah,ai;for(ai in aj){ah=aj[ai];if(ah instanceof N&&(ak.style!=null)&&ai in ak.style){ah=new Z([ah,y(ai,0)])}aj[ai]=ah}return aj};L=function(am){var ai,ah,ak,al,aj;ak=[t,z,N,Z];for(al=0,aj=ak.length;al<aj;al++){ah=ak[al];ai=ah.create(am);if(ai!=null){return ai}}return null};Z=(function(){function ah(ai){this.parts=ai;this.format=l(this.format,this);this.interpolate=l(this.interpolate,this)}ah.prototype.interpolate=function(al,ak){var ai,aj,ao,ap,an,am;ap=this.parts;ai=al.parts;ao=[];for(aj=an=0,am=Math.min(ap.length,ai.length);0<=am?an<am:an>am;aj=0<=am?++an:--an){if(ap[aj].interpolate!=null){ao.push(ap[aj].interpolate(ai[aj],ak))}else{ao.push(ap[aj])}}return new ah(ao)};ah.prototype.format=function(){var ai;ai=this.parts.map(function(aj){if(aj.format!=null){return aj.format()}else{return aj}});return ai.join("")};ah.create=function(at){var ap,an,am,al,au,aq,ao,ak,aj,ar,ai;at=""+at;am=[];ao=[{re:/(#[a-f\d]{3,6})/ig,klass:R,parse:function(av){return av}},{re:/(rgba?\([0-9.]*, ?[0-9.]*, ?[0-9.]*(?:, ?[0-9.]*)?\))/ig,klass:R,parse:function(av){return av}},{re:/([-+]?[\d.]+)/ig,klass:N,parse:parseFloat}];for(ak=0,ar=ao.length;ak<ar;ak++){aq=ao[ak];au=aq.re;while(an=au.exec(at)){am.push({index:an.index,length:an[1].length,interpolable:aq.klass.create(aq.parse(an[1]))})}}am=am.sort(function(aw,av){if(aw.index>av.index){return 1}else{return -1}});al=[];ap=0;for(aj=0,ai=am.length;aj<ai;aj++){an=am[aj];if(an.index<ap){continue}if(an.index>ap){al.push(at.substring(ap,an.index))}al.push(an.interpolable);ap=an.index+an.length}if(ap<at.length){al.push(at.substring(ap))}return new ah(al)};return ah})();z=(function(){function ah(ai){this.format=l(this.format,this);this.interpolate=l(this.interpolate,this);this.obj=ai}ah.prototype.interpolate=function(an,am){var ai,al,ak,ao,aj;ao=this.obj;ai=an.obj;ak={};for(al in ao){aj=ao[al];if(aj.interpolate!=null){ak[al]=aj.interpolate(ai[al],am)}else{ak[al]=aj}}return new ah(ak)};ah.prototype.format=function(){return this.obj};ah.create=function(ak){var aj,al,ai;if(ak instanceof Object){al={};for(aj in ak){ai=ak[aj];al[aj]=L(ai)}return new ah(al)}return null};return ah})();N=(function(){function ah(ai){this.format=l(this.format,this);this.interpolate=l(this.interpolate,this);this.value=parseFloat(ai)}ah.prototype.interpolate=function(ak,aj){var ai,al;al=this.value;ai=ak.value;return new ah((ai-al)*aj+al)};ah.prototype.format=function(){return c(this.value,5)};ah.create=function(ai){if(typeof ai==="number"){return new ah(ai)}return null};return ah})();t=(function(){function ah(ai){this.values=ai;this.format=l(this.format,this);this.interpolate=l(this.interpolate,this)}ah.prototype.interpolate=function(am,al){var ai,ak,aj,ap,ao,an;ap=this.values;ai=am.values;aj=[];for(ak=ao=0,an=Math.min(ap.length,ai.length);0<=an?ao<an:ao>an;ak=0<=an?++ao:--ao){if(ap[ak].interpolate!=null){aj.push(ap[ak].interpolate(ai[ak],al))}else{aj.push(ap[ak])}}return new ah(aj)};ah.prototype.format=function(){return this.values.map(function(ai){if(ai.format!=null){return ai.format()}else{return ai}})};ah.createFromArray=function(ai){var aj;aj=ai.map(function(ak){return L(ak)||ak});aj=aj.filter(function(ak){return ak!=null});return new ah(aj)};ah.create=function(ai){if(ai instanceof Array){return ah.createFromArray(ai)}return null};return ah})();u=(function(){function ah(ai,aj){this.rgb=ai!=null?ai:{};this.format=aj;this.toRgba=l(this.toRgba,this);this.toRgb=l(this.toRgb,this);this.toHex=l(this.toHex,this)}ah.fromHex=function(ak){var aj,ai;aj=ak.match(/^#([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i);if(aj!=null){ak="#"+aj[1]+aj[1]+aj[2]+aj[2]+aj[3]+aj[3]}ai=ak.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);if(ai!=null){return new ah({r:parseInt(ai[1],16),g:parseInt(ai[2],16),b:parseInt(ai[3],16),a:1},"hex")}return null};ah.fromRgb=function(aj){var ai,ak;ai=aj.match(/^rgba?\(([0-9.]*), ?([0-9.]*), ?([0-9.]*)(?:, ?([0-9.]*))?\)$/);if(ai!=null){return new ah({r:parseFloat(ai[1]),g:parseFloat(ai[2]),b:parseFloat(ai[3]),a:parseFloat((ak=ai[4])!=null?ak:1)},ai[4]!=null?"rgba":"rgb")}return null};ah.componentToHex=function(aj){var ai;ai=aj.toString(16);if(ai.length===1){return"0"+ai}else{return ai}};ah.prototype.toHex=function(){return"#"+ah.componentToHex(this.rgb.r)+ah.componentToHex(this.rgb.g)+ah.componentToHex(this.rgb.b)};ah.prototype.toRgb=function(){return"rgb("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+")"};ah.prototype.toRgba=function(){return"rgba("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+", "+this.rgb.a+")"};return ah})();R=(function(){function ah(ai){this.color=ai;this.format=l(this.format,this);this.interpolate=l(this.interpolate,this)}ah.prototype.interpolate=function(ap,ar){var ak,aj,an,ai,aq,al,ao,am;ai=this.color;ak=ap.color;an={};am=["r","g","b"];for(al=0,ao=am.length;al<ao;al++){aj=am[al];aq=Math.round((ak.rgb[aj]-ai.rgb[aj])*ar+ai.rgb[aj]);an[aj]=Math.min(255,Math.max(0,aq))}aj="a";aq=c((ak.rgb[aj]-ai.rgb[aj])*ar+ai.rgb[aj],5);an[aj]=Math.min(1,Math.max(0,aq));return new ah(new u(an,ak.format))};ah.prototype.format=function(){if(this.color.format==="hex"){return this.color.toHex()}else{if(this.color.format==="rgb"){return this.color.toRgb()}else{if(this.color.format==="rgba"){return this.color.toRgba()}}}};ah.create=function(aj){var ai;if(typeof aj!=="string"){return}ai=u.fromHex(aj)||u.fromRgb(aj);if(ai!=null){return new ah(ai)}return null};return ah})();k=(function(){function ah(ai){this.props=ai;this.applyRotateCenter=l(this.applyRotateCenter,this);this.format=l(this.format,this);this.interpolate=l(this.interpolate,this)}ah.prototype.interpolate=function(ai,av){var at,ap,aw,aq,ao,am,ak,au,aj,ar,an,al;aw={};ar=["translate","scale","rotate"];for(aq=0,au=ar.length;aq<au;aq++){ap=ar[aq];aw[ap]=[];for(at=ao=0,an=this.props[ap].length;0<=an?ao<an:ao>an;at=0<=an?++ao:--ao){aw[ap][at]=(ai.props[ap][at]-this.props[ap][at])*av+this.props[ap][at]}}for(at=am=1;am<=2;at=++am){aw.rotate[at]=ai.props.rotate[at]}al=["skew"];for(ak=0,aj=al.length;ak<aj;ak++){ap=al[ak];aw[ap]=(ai.props[ap]-this.props[ap])*av+this.props[ap]}return new ah(aw)};ah.prototype.format=function(){return"translate("+(this.props.translate.join(","))+") rotate("+(this.props.rotate.join(","))+") skewX("+this.props.skew+") scale("+(this.props.scale.join(","))+")"};ah.prototype.applyRotateCenter=function(ak){var am,ai,al,an,ao,aj;ai=Y.createSVGMatrix();ai=ai.translate(ak[0],ak[1]);ai=ai.rotate(this.props.rotate[0]);ai=ai.translate(-ak[0],-ak[1]);al=new i(ai);an=al.decompose().props.translate;aj=[];for(am=ao=0;ao<=1;am=++ao){aj.push(this.props.translate[am]-=an[am])}return aj};return ah})();Y=typeof document!=="undefined"&&document!==null?document.createElementNS("http://www.w3.org/2000/svg","svg"):void 0;i=(function(){function ah(ai){this.m=ai;this.applyProperties=l(this.applyProperties,this);this.decompose=l(this.decompose,this);if(!this.m){this.m=Y.createSVGMatrix()}}ah.prototype.decompose=function(){var am,al,ak,aj,ai;aj=new K([this.m.a,this.m.b]);ai=new K([this.m.c,this.m.d]);am=aj.length();ak=aj.dot(ai);aj=aj.normalize();al=ai.combine(aj,1,-ak).length();return new k({translate:[this.m.e,this.m.f],rotate:[Math.atan2(this.m.b,this.m.a)*180/Math.PI,this.rotateCX,this.rotateCY],scale:[am,al],skew:ak/al*180/Math.PI})};ah.prototype.applyProperties=function(an){var al,aj,ao,aq,ak,ap,am,ai;al={};for(ak=0,ap=an.length;ak<ap;ak++){ao=an[ak];al[ao[0]]=ao[1]}for(aj in al){aq=al[aj];if(aj==="translateX"){this.m=this.m.translate(aq,0)}else{if(aj==="translateY"){this.m=this.m.translate(0,aq)}else{if(aj==="scaleX"){this.m=this.m.scaleNonUniform(aq,1)}else{if(aj==="scaleY"){this.m=this.m.scaleNonUniform(1,aq)}else{if(aj==="rotateZ"){this.m=this.m.rotate(aq)}else{if(aj==="skewX"){this.m=this.m.skewX(aq)}else{if(aj==="skewY"){this.m=this.m.skewY(aq)}}}}}}}}this.rotateCX=(am=al.rotateCX)!=null?am:0;return this.rotateCY=(ai=al.rotateCY)!=null?ai:0};return ah})();K=(function(){function ah(ai){this.els=ai;this.combine=l(this.combine,this);this.normalize=l(this.normalize,this);this.length=l(this.length,this);this.cross=l(this.cross,this);this.dot=l(this.dot,this);this.e=l(this.e,this)}ah.prototype.e=function(ai){if(ai<1||ai>this.els.length){return null}else{return this.els[ai-1]}};ah.prototype.dot=function(aj){var ai,al,ak;ai=aj.els||aj;ak=0;al=this.els.length;if(al!==ai.length){return null}al+=1;while(--al){ak+=this.els[al-1]*ai[al-1]}return ak};ah.prototype.cross=function(aj){var ai,ak;ak=aj.els||aj;if(this.els.length!==3||ak.length!==3){return null}ai=this.els;return new ah([(ai[1]*ak[2])-(ai[2]*ak[1]),(ai[2]*ak[0])-(ai[0]*ak[2]),(ai[0]*ak[1])-(ai[1]*ak[0])])};ah.prototype.length=function(){var aj,am,al,ai,ak;aj=0;ak=this.els;for(al=0,ai=ak.length;al<ai;al++){am=ak[al];aj+=Math.pow(am,2)}return Math.sqrt(aj)};ah.prototype.normalize=function(){var am,aj,ak,ai,al;ak=this.length();ai=[];al=this.els;for(aj in al){am=al[aj];ai[aj]=am/ak}return new ah(ai)};ah.prototype.combine=function(aj,ao,al){var ak,ai,an,am;ai=[];for(ak=an=0,am=this.els.length;0<=am?an<am:an>am;ak=0<=am?++an:--an){ai[ak]=(ao*this.els[ak])+(al*aj.els[ak])}return new ah(ai)};return ah})();e=(function(){function ah(){this.toMatrix=l(this.toMatrix,this);this.format=l(this.format,this);this.interpolate=l(this.interpolate,this)}ah.prototype.interpolate=function(aB,ar,at){var az,au,aD,ax,ay,av,aw,ap,ao,aC,an,al,ak,aj,ai,aA,aq,am;if(at==null){at=null}aD=this;au=new ah;aq=["translate","scale","skew","perspective"];for(al=0,aA=aq.length;al<aA;al++){aw=aq[al];au[aw]=[];for(ax=ak=0,am=aD[aw].length-1;0<=am?ak<=am:ak>=am;ax=0<=am?++ak:--ak){if((at==null)||at.indexOf(aw)>-1||at.indexOf(""+aw+["x","y","z"][ax])>-1){au[aw][ax]=(aB[aw][ax]-aD[aw][ax])*ar+aD[aw][ax]}else{au[aw][ax]=aD[aw][ax]}}}if((at==null)||at.indexOf("rotate")!==-1){ap=aD.quaternion;ao=aB.quaternion;az=ap[0]*ao[0]+ap[1]*ao[1]+ap[2]*ao[2]+ap[3]*ao[3];if(az<0){for(ax=aj=0;aj<=3;ax=++aj){ap[ax]=-ap[ax]}az=-az}if(az+1>0.05){if(1-az>=0.05){an=Math.acos(az);av=1/Math.sin(an);aC=Math.sin(an*(1-ar))*av;ay=Math.sin(an*ar)*av}else{aC=1-ar;ay=ar}}else{ao[0]=-ap[1];ao[1]=ap[0];ao[2]=-ap[3];ao[3]=ap[2];aC=Math.sin(piDouble*(0.5-ar));ay=Math.sin(piDouble*ar)}au.quaternion=[];for(ax=ai=0;ai<=3;ax=++ai){au.quaternion[ax]=ap[ax]*aC+ao[ax]*ay}}else{au.quaternion=aD.quaternion}return au};ah.prototype.format=function(){return this.toMatrix().toString()};ah.prototype.toMatrix=function(){var aw,ao,am,ap,au,an,ay,ax,av,at,ar,aq,al,ak,aj,ai;aw=this;au=f.I(4);for(ao=al=0;al<=3;ao=++al){au.els[ao][3]=aw.perspective[ao]}an=aw.quaternion;at=an[0];ar=an[1];aq=an[2];av=an[3];ay=aw.skew;ap=[[1,0],[2,0],[2,1]];for(ao=ak=2;ak>=0;ao=--ak){if(ay[ao]){ax=f.I(4);ax.els[ap[ao][0]][ap[ao][1]]=ay[ao];au=au.multiply(ax)}}au=au.multiply(new f([[1-2*(ar*ar+aq*aq),2*(at*ar-aq*av),2*(at*aq+ar*av),0],[2*(at*ar+aq*av),1-2*(at*at+aq*aq),2*(ar*aq-at*av),0],[2*(at*aq-ar*av),2*(ar*aq+at*av),1-2*(at*at+ar*ar),0],[0,0,0,1]]));for(ao=aj=0;aj<=2;ao=++aj){for(am=ai=0;ai<=2;am=++ai){au.els[ao][am]*=aw.scale[ao]}au.els[3][ao]=aw.translate[ao]}return au};return ah})();f=(function(){function ah(ai){this.els=ai;this.toString=l(this.toString,this);this.decompose=l(this.decompose,this);this.inverse=l(this.inverse,this);this.augment=l(this.augment,this);this.toRightTriangular=l(this.toRightTriangular,this);this.transpose=l(this.transpose,this);this.multiply=l(this.multiply,this);this.dup=l(this.dup,this);this.e=l(this.e,this)}ah.prototype.e=function(aj,ai){if(aj<1||aj>this.els.length||ai<1||ai>this.els[0].length){return null}return this.els[aj-1][ai-1]};ah.prototype.dup=function(){return new ah(this.els)};ah.prototype.multiply=function(aw){var at,au,av,ai,aq,ao,am,al,ap,ak,aj,an,ar;an=aw.modulus?true:false;at=aw.els||aw;if(typeof at[0][0]==="undefined"){at=new ah(at).els}ak=this.els.length;am=ak;al=at[0].length;av=this.els[0].length;ai=[];ak+=1;while(--ak){aq=am-ak;ai[aq]=[];aj=al;aj+=1;while(--aj){ao=al-aj;ar=0;ap=av;ap+=1;while(--ap){au=av-ap;ar+=this.els[aq][au]*at[au][ao]}ai[aq][ao]=ar}}at=new ah(ai);if(an){return at.col(1)}else{return at}};ah.prototype.transpose=function(){var ao,an,al,aj,ak,ai,am;am=this.els.length;ao=this.els[0].length;an=[];ak=ao;ak+=1;while(--ak){al=ao-ak;an[al]=[];ai=am;ai+=1;while(--ai){aj=am-ai;an[al][aj]=this.els[aj][al]}}return new ah(an)};ah.prototype.toRightTriangular=function(){var at,ao,ar,ap,am,av,aw,aj,au,ai,an,al,aq,ak;at=this.dup();aj=this.els.length;am=aj;av=this.els[0].length;while(--aj){ar=am-aj;if(at.els[ar][ar]===0){for(ap=an=aq=ar+1;aq<=am?an<am:an>am;ap=aq<=am?++an:--an){if(at.els[ap][ar]!==0){ao=[];au=av;au+=1;while(--au){ai=av-au;ao.push(at.els[ar][ai]+at.els[ap][ai])}at.els[ar]=ao;break}}}if(at.els[ar][ar]!==0){for(ap=al=ak=ar+1;ak<=am?al<am:al>am;ap=ak<=am?++al:--al){aw=at.els[ap][ar]/at.els[ar][ar];ao=[];au=av;au+=1;while(--au){ai=av-au;ao.push(ai<=ar?0:at.els[ap][ai]-at.els[ar][ai]*aw)}at.els[ap]=ao}}}return at};ah.prototype.augment=function(ar){var ap,am,aq,ao,an,al,ak,aj,ai;ap=ar.els||ar;if(typeof ap[0][0]==="undefined"){ap=new ah(ap).els}am=this.dup();aq=am.els[0].length;aj=am.els.length;al=aj;ak=ap[0].length;if(aj!==ap.length){return null}aj+=1;while(--aj){ao=al-aj;ai=ak;ai+=1;while(--ai){an=ak-ai;am.els[ao][aq+an]=ap[ao][an]}}return am};ah.prototype.inverse=function(){var ar,ak,ao,aq,av,ap,al,au,an,aj,at,ai,am;aj=this.els.length;al=aj;ar=this.augment(ah.I(aj)).toRightTriangular();au=ar.els[0].length;av=[];aj+=1;while(--aj){aq=aj-1;ao=[];at=au;av[aq]=[];ak=ar.els[aq][aq];at+=1;while(--at){ai=au-at;an=ar.els[aq][ai]/ak;ao.push(an);if(ai>=al){av[aq].push(an)}}ar.els[aq]=ao;for(ap=am=0;0<=aq?am<aq:am>aq;ap=0<=aq?++am:--am){ao=[];at=au;at+=1;while(--at){ai=au-at;ao.push(ar.els[ap][ai]-ar.els[aq][ai]*ar.els[ap][aq])}ar.els[ap]=ao}}return new ah(av)};ah.I=function(an){var am,al,ak,ai,aj;am=[];ai=an;an+=1;while(--an){al=ai-an;am[al]=[];aj=ai;aj+=1;while(--aj){ak=ai-aj;am[al][ak]=al===ak?1:0}}return new ah(am)};ah.prototype.decompose=function(){var aJ,aQ,an,aO,aM,ao,ay,au,am,aA,ak,aT,aS,aj,al,aD,aq,ap,aC,ai,at,aU,ar,aB,az,ax,aw,av,aR,aP,aN,aL,aK,aI,aH,aG,aF,aE;ao=this;ai=[];aq=[];ap=[];aA=[];au=[];aJ=[];for(aQ=aR=0;aR<=3;aQ=++aR){aJ[aQ]=[];for(aO=aP=0;aP<=3;aO=++aP){aJ[aQ][aO]=ao.els[aQ][aO]}}if(aJ[3][3]===0){return false}for(aQ=aN=0;aN<=3;aQ=++aN){for(aO=aL=0;aL<=3;aO=++aL){aJ[aQ][aO]/=aJ[3][3]}}am=ao.dup();for(aQ=aK=0;aK<=2;aQ=++aK){am.els[aQ][3]=0}am.els[3][3]=1;if(aJ[0][3]!==0||aJ[1][3]!==0||aJ[2][3]!==0){aT=new K(aJ.slice(0,4)[3]);an=am.inverse();at=an.transpose();au=at.multiply(aT).els;for(aQ=aI=0;aI<=2;aQ=++aI){aJ[aQ][3]=0}aJ[3][3]=1}else{au=[0,0,0,1]}for(aQ=aH=0;aH<=2;aQ=++aH){ai[aQ]=aJ[3][aQ];aJ[3][aQ]=0}aj=[];for(aQ=aG=0;aG<=2;aQ=++aG){aj[aQ]=new K(aJ[aQ].slice(0,3))}aq[0]=aj[0].length();aj[0]=aj[0].normalize();ap[0]=aj[0].dot(aj[1]);aj[1]=aj[1].combine(aj[0],1,-ap[0]);aq[1]=aj[1].length();aj[1]=aj[1].normalize();ap[0]/=aq[1];ap[1]=aj[0].dot(aj[2]);aj[2]=aj[2].combine(aj[0],1,-ap[1]);ap[2]=aj[1].dot(aj[2]);aj[2]=aj[2].combine(aj[1],1,-ap[2]);aq[2]=aj[2].length();aj[2]=aj[2].normalize();ap[1]/=aq[2];ap[2]/=aq[2];ay=aj[1].cross(aj[2]);if(aj[0].dot(ay)<0){for(aQ=aF=0;aF<=2;aQ=++aF){aq[aQ]*=-1;for(aO=aE=0;aE<=2;aO=++aE){aj[aQ].els[aO]*=-1}}}al=function(aV,aW){return aj[aV].els[aW]};aS=[];aS[1]=Math.asin(-al(0,2));if(Math.cos(aS[1])!==0){aS[0]=Math.atan2(al(1,2),al(2,2));aS[2]=Math.atan2(al(0,1),al(0,0))}else{aS[0]=Math.atan2(-al(2,0),al(1,1));aS[1]=0}aC=al(0,0)+al(1,1)+al(2,2)+1;if(aC>0.0001){aD=0.5/Math.sqrt(aC);az=0.25/aD;ax=(al(2,1)-al(1,2))*aD;aw=(al(0,2)-al(2,0))*aD;av=(al(1,0)-al(0,1))*aD}else{if((al(0,0)>al(1,1))&&(al(0,0)>al(2,2))){aD=Math.sqrt(1+al(0,0)-al(1,1)-al(2,2))*2;ax=0.25*aD;aw=(al(0,1)+al(1,0))/aD;av=(al(0,2)+al(2,0))/aD;az=(al(2,1)-al(1,2))/aD}else{if(al(1,1)>al(2,2)){aD=Math.sqrt(1+al(1,1)-al(0,0)-al(2,2))*2;ax=(al(0,1)+al(1,0))/aD;aw=0.25*aD;av=(al(1,2)+al(2,1))/aD;az=(al(0,2)-al(2,0))/aD}else{aD=Math.sqrt(1+al(2,2)-al(0,0)-al(1,1))*2;ax=(al(0,2)+al(2,0))/aD;aw=(al(1,2)+al(2,1))/aD;av=0.25*aD;az=(al(1,0)-al(0,1))/aD}}}aA=[ax,aw,av,az];ak=new e;ak.translate=ai;ak.scale=aq;ak.skew=ap;ak.quaternion=aA;ak.perspective=au;ak.rotate=aS;for(ar in ak){aU=ak[ar];for(aM in aU){aB=aU[aM];if(isNaN(aB)){aU[aM]=0}}}return ak};ah.prototype.toString=function(){var aj,ai,am,al,ak;am="matrix3d(";for(aj=al=0;al<=3;aj=++al){for(ai=ak=0;ak<=3;ai=++ak){am+=c(this.els[aj][ai],10);if(!(aj===3&&ai===3)){am+=","}}}am+=")";return am};ah.matrixForTransform=p(function(ak){var am,aj,al,an,ai,ao;am=document.createElement("div");am.style.position="absolute";am.style.visibility="hidden";am.style[v("transform")]=ak;document.body.appendChild(am);al=window.getComputedStyle(am,null);aj=(an=(ai=al.transform)!=null?ai:al[v("transform")])!=null?an:(ao=A.tests)!=null?ao.matrixForTransform(ak):void 0;document.body.removeChild(am);return aj});ah.fromTransform=function(aj){var an,am,ak,ai,ao,al;ai=aj!=null?aj.match(/matrix3?d?\(([-0-9,e \.]*)\)/):void 0;if(ai){an=ai[1].split(",");an=an.map(parseFloat);if(an.length===6){am=[an[0],an[1],0,0,an[2],an[3],0,0,0,0,1,0,an[4],an[5],0,1]}else{am=an}}else{am=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}ao=[];for(ak=al=0;al<=3;ak=++al){ao.push(am.slice(ak*4,ak*4+4))}return new ah(ao)};return ah})();J=p(function(aq){var ak,an,ah,ar,ao,al,aj,ap,ai,am;if(document.body.style[aq]!==void 0){return""}ar=aq.split("-");ao="";for(al=0,ap=ar.length;al<ap;al++){ah=ar[al];ao+=ah.substring(0,1).toUpperCase()+ah.substring(1)}am=["Webkit","Moz","ms"];for(aj=0,ai=am.length;aj<ai;aj++){an=am[aj];ak=an+ao;if(document.body.style[ak]!==void 0){return an}}return""});v=p(function(ai){var ah;ah=J(ai);if(ah==="Moz"){return""+ah+(ai.substring(0,1).toUpperCase()+ai.substring(1))}if(ah!==""){return"-"+(ah.toLowerCase())+"-"+(b(ai))}return b(ai)});V=typeof window!=="undefined"&&window!==null?window.requestAnimationFrame:void 0;ad=[];h=[];q=false;O=1;if(typeof window!=="undefined"&&window!==null){window.addEventListener("keyup",function(ah){if(ah.keyCode===68&&ah.shiftKey&&ah.ctrlKey){return A.toggleSlow()}})}if(V==null){ag=0;V=function(ak){var ah,aj,ai;ah=Date.now();ai=Math.max(0,16-(ah-ag));aj=window.setTimeout(function(){return ak(ah+ai)},ai);ag=ah+ai;return aj}}r=false;E=false;T=function(){if(!r){r=true;return V(Q)}};Q=function(aj){var al,ai,ak,ah;if(E){V(Q);return}ai=[];for(ak=0,ah=ad.length;ak<ah;ak++){al=ad[ak];if(!F(aj,al)){ai.push(al)}}ad=ad.filter(function(am){return ai.indexOf(am)===-1});if(ad.length===0){return r=false}else{return V(Q)}};F=function(aq,ai){var ap,al,an,ak,am,ao,ah,aj;if(ai.tStart==null){ai.tStart=aq}ak=(aq-ai.tStart)/ai.options.duration;am=ai.curve(ak);al={};if(ak>=1){if(ai.curve.returnsToSelf){al=ai.properties.start}else{al=ai.properties.end}}else{aj=ai.properties.start;for(ap in aj){an=aj[ap];al[ap]=ac(an,ai.properties.end[ap],am)}}j(ai.el,al);if(typeof(ao=ai.options).change==="function"){ao.change(ai.el,Math.min(1,ak))}if(ak>=1){if(typeof(ah=ai.options).complete==="function"){ah.complete(ai.el)}}return ak<1};ac=function(aj,ah,ai){if((aj!=null)&&(aj.interpolate!=null)){return aj.interpolate(ah,ai)}return null};P=function(ah,al,ar,ap){var aj,aq,ai,an,am,ak,ao;if(ap!=null){h=h.filter(function(at){return at.id!==ap})}A.stop(ah,{timeout:false});if(!ar.animated){A.css(ah,al);if(typeof ar.complete==="function"){ar.complete(this)}return}am=U(ah,Object.keys(al));al=M(al);aj={};ak=[];for(ai in al){ao=al[ai];if((ah.style!=null)&&af.contains(ai)){ak.push([ai,ao])}else{aj[ai]=L(ao)}}if(ak.length>0){aq=B(ah);if(aq){an=new i();an.applyProperties(ak)}else{ao=(ak.map(function(at){return ae(at[0],at[1])})).join(" ");an=f.fromTransform(f.matrixForTransform(ao))}aj.transform=an.decompose();if(aq){am.transform.applyRotateCenter([aj.transform.props.rotate[1],aj.transform.props.rotate[2]])}}s(ah,aj);ad.push({el:ah,properties:{start:am,end:aj},options:ar,curve:ar.type.call(ar.type,ar)});return T()};aa=[];S=0;G=function(ah){if(!n()){return}return V(function(){if(aa.indexOf(ah)===-1){return}return ah.realTimeoutId=setTimeout(function(){ah.fn();return I(ah.id)},ah.delay)})};x=function(ai,ah){var aj;S+=1;aj={id:S,tStart:Date.now(),fn:ai,delay:ah,originalDelay:ah};G(aj);aa.push(aj);return S};I=function(ah){return aa=aa.filter(function(ai){if(ai.id===ah&&ai.realTimeoutId){clearTimeout(ai.realTimeoutId)}return ai.id!==ah})};a=function(aj,ah){var ai;if(aj!=null){ai=aj-ah.tStart;return ah.originalDelay-ai}else{return ah.originalDelay}};if(typeof window!=="undefined"&&window!==null){window.addEventListener("unload",function(){})}m=null;C(function(ak){var an,aj,aq,ap,ao,al,ar,ai,ah,am;E=!ak;if(!ak){m=Date.now();am=[];for(ap=0,ar=aa.length;ap<ar;ap++){aq=aa[ap];am.push(clearTimeout(aq.realTimeoutId))}return am}else{if(r){aj=Date.now()-m;for(ao=0,ai=ad.length;ao<ai;ao++){an=ad[ao];if(an.tStart!=null){an.tStart+=aj}}}for(al=0,ah=aa.length;al<ah;al++){aq=aa[al];aq.delay=a(m,aq);G(aq)}return m=null}});A={};A.linear=function(){return function(ah){return ah}};A.spring=function(aj){var ai,ah,an,am,al,ak;if(aj==null){aj={}}w(aj,A.spring.defaults);am=Math.max(1,aj.frequency/20);al=Math.pow(20,aj.friction/100);ak=aj.anticipationSize/1000;an=Math.max(0,ak);ai=function(at){var au,ap,ao,ar,aq;au=0.8;ar=ak/(1-ak);aq=0;ao=(ar-(au*aq))/(ar-aq);ap=(au-ao)/ar;return(ap*at*aj.anticipationStrength/100)+ao};ah=function(ao){return Math.pow(al/10,-ao)*(1-ao)};return function(ax){var ao,ar,av,aq,au,at,aw,ap;at=(ax/(1-ak))-(ak/(1-ak));if(ax<ak){ap=(ak/(1-ak))-(ak/(1-ak));aw=(0/(1-ak))-(ak/(1-ak));au=Math.acos(1/ai(ap));av=(Math.acos(1/ai(aw))-au)/(am*(-ak));ao=ai}else{ao=ah;au=0;av=1}ar=ao(at);aq=am*(ax-ak)*av+au;return 1-(ar*Math.cos(aq))}};A.bounce=function(ai){var ah,aj,al,ak;if(ai==null){ai={}}w(ai,A.bounce.defaults);al=Math.max(1,ai.frequency/20);ak=Math.pow(20,ai.friction/100);ah=function(am){return Math.pow(ak/10,-am)*(1-am)};aj=function(ap){var ao,an,aq,am;am=-3.14/2;an=1;ao=ah(ap);aq=al*ap*an+am;return ao*Math.cos(aq)};aj.returnsToSelf=true;return aj};A.gravity=function(ai){var ah,al,an,ak,aj,am,ao;if(ai==null){ai={}}w(ai,A.gravity.defaults);al=Math.min(ai.bounciness/1250,0.8);ak=ai.elasticity/1000;ao=100;an=[];ah=(function(){var ap,aq;ap=Math.sqrt(2/ao);aq={a:-ap,b:ap,H:1};if(ai.returnsToSelf){aq.a=0;aq.b=aq.b*2}while(aq.H>0.001){ah=aq.b-aq.a;aq={a:aq.b,b:aq.b+ah*al,H:aq.H*al*al}}return aq.b})();am=function(aq,ap,at,ar){var av,au;ah=ap-aq;au=(2/ah)*ar-1-(aq*2/ah);av=au*au*at-at+1;if(ai.returnsToSelf){av=1-av}return av};(function(){var ar,ap,at,aq;ap=Math.sqrt(2/(ao*ah*ah));at={a:-ap,b:ap,H:1};if(ai.returnsToSelf){at.a=0;at.b=at.b*2}an.push(at);ar=ah;aq=[];while(at.b<1&&at.H>0.001){ar=at.b-at.a;at={a:at.b,b:at.b+ar*al,H:at.H*ak};aq.push(an.push(at))}return aq})();aj=function(ar){var at,aq,ap;aq=0;at=an[aq];while(!(ar>=at.a&&ar<=at.b)){aq+=1;at=an[aq];if(!at){break}}if(!at){ap=ai.returnsToSelf?0:1}else{ap=am(at.a,at.b,at.H,ar)}return ap};aj.returnsToSelf=ai.returnsToSelf;return aj};A.forceWithGravity=function(ah){if(ah==null){ah={}}w(ah,A.forceWithGravity.defaults);ah.returnsToSelf=true;return A.gravity(ah)};A.bezier=(function(){var aj,ah,ai;ah=function(ak,ao,an,am,al){return(Math.pow(1-ak,3)*ao)+(3*Math.pow(1-ak,2)*ak*an)+(3*(1-ak)*Math.pow(ak,2)*am)+Math.pow(ak,3)*al};aj=function(ak,ao,an,am,al){return{x:ah(ak,ao.x,an.x,am.x,al.x),y:ah(ak,ao.y,an.y,am.y,al.y)}};ai=function(av,ak,ax){var al,ao,ap,aq,ar,aw,au,am,an,at;al=null;for(an=0,at=ak.length;an<at;an++){ao=ak[an];if(av>=ao(0).x&&av<=ao(1).x){al=ao}if(al!==null){break}}if(!al){if(ax){return 0}else{return 1}}am=0.0001;aq=0;aw=1;ar=(aw+aq)/2;au=al(ar).x;ap=0;while(Math.abs(av-au)>am&&ap<100){if(av>au){aq=ar}else{aw=ar}ar=(aw+aq)/2;au=al(ar).x;ap+=1}return al(ar).y};return function(ak){var an,am,al;if(ak==null){ak={}}al=ak.points;an=(function(){var ap,ao,aq;an=[];aq=function(ar,au){var at;at=function(av){return aj(av,ar,ar.cp[ar.cp.length-1],au.cp[0],au)};return an.push(at)};for(ap in al){ao=parseInt(ap);if(ao>=al.length-1){break}aq(al[ao],al[ao+1])}return an})();am=function(ao){if(ao===0){return 0}else{if(ao===1){return 1}else{return ai(ao,an,this.returnsToSelf)}}};am.returnsToSelf=al[al.length-1].y===0;return am}})();A.easeInOut=function(ah){var aj,ai;if(ah==null){ah={}}aj=(ai=ah.friction)!=null?ai:A.easeInOut.defaults.friction;return A.bezier({points:[{x:0,y:0,cp:[{x:0.92-(aj/1000),y:0}]},{x:1,y:1,cp:[{x:0.08+(aj/1000),y:1}]}]})};A.easeIn=function(ah){var aj,ai;if(ah==null){ah={}}aj=(ai=ah.friction)!=null?ai:A.easeIn.defaults.friction;return A.bezier({points:[{x:0,y:0,cp:[{x:0.92-(aj/1000),y:0}]},{x:1,y:1,cp:[{x:1,y:1}]}]})};A.easeOut=function(ah){var aj,ai;if(ah==null){ah={}}aj=(ai=ah.friction)!=null?ai:A.easeOut.defaults.friction;return A.bezier({points:[{x:0,y:0,cp:[{x:0,y:0}]},{x:1,y:1,cp:[{x:0.08+(aj/1000),y:1}]}]})};A.spring.defaults={frequency:300,friction:200,anticipationSize:0,anticipationStrength:0};A.bounce.defaults={frequency:300,friction:200};A.forceWithGravity.defaults=A.gravity.defaults={bounciness:400,elasticity:200};A.easeInOut.defaults=A.easeIn.defaults=A.easeOut.defaults={friction:500};A.css=X(function(ai,ah){return ab(ai,ah,true)});A.animate=X(function(aj,ai,ah){var ak;if(ah==null){ah={}}ah=D(ah);w(ah,{type:A.easeInOut,duration:1000,delay:0,animated:true});ah.duration=Math.max(0,ah.duration*O);ah.delay=Math.max(0,ah.delay);if(ah.delay===0){return P(aj,ai,ah)}else{ak=A.setTimeout(function(){return P(aj,ai,ah,ak)},ah.delay);return h.push({id:ak,el:aj})}});A.stop=X(function(ai,ah){if(ah==null){ah={}}if(ah.timeout==null){ah.timeout=true}if(ah.timeout){h=h.filter(function(aj){if(aj.el===ai&&((ah.filter==null)||ah.filter(aj))){A.clearTimeout(aj.id);return false}return true})}return ad=ad.filter(function(aj){return aj.el!==ai})});A.setTimeout=function(ai,ah){return x(ai,ah*O)};A.clearTimeout=function(ah){return I(ah)};A.toggleSlow=function(){q=!q;if(q){O=3}else{O=1}return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log("dynamics.js: slow animations "+(q?"enabled":"disabled")):void 0:void 0};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=A}else{if(typeof define==="function"){define("dynamics",function(){return A})}else{window.dynamics=A}}}).call(this);
